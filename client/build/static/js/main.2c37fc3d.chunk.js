(this["webpackJsonptest-api"]=this["webpackJsonptest-api"]||[]).push([[0],{49:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n(19),s=n.n(r),o=n(2),i=(n(49),n(6)),u=n(13),l=n(17),d=n(7),A=n.n(d),j=function(e){e?A.a.defaults.headers.common.Authorization=e:delete A.a.defaults.headers.common.Authorization},h=n(4),b=n.n(h),f=n(8),p="GET_ERRORS",O="USER_LOADING",m="SET_CURRENT_USER",g="SET_WINE_ARR",w="SET_PICKED_WINE",v="KEEP_FORM",x="UPDATE_WINE_ARR",C="DELETE_WINE_ARR",E=function(e){return function(t){localStorage.setItem("jwtToken",e),j(e);var n=Object(l.a)(e);t(y(n))}},y=function(e){return{type:m,payload:e}},B=n(5),S=function(e){return{type:w,payload:e}},N=function(e){var t=e.card,n=e.setShowEditModal,c=e.cardWidth,r=Object(o.b)(),s=t.img?t.img:"data:image/png;base64,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",i=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(S(t)),n({display:"flex"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("figure",{className:"card",id:t._id,style:{width:"calc(".concat(c,"% - 20px)")},children:[Object(a.jsxs)("header",{className:"card-header",children:[Object(a.jsx)("p",{className:"card-header__position",children:"".concat(t.shelf+1,":").concat(t.column+1)}),Object(a.jsx)("button",{className:"edit-card__button",onClick:i,children:"\u22ee"})]}),Object(a.jsx)("img",{className:"card__img",alt:"wine bottle",src:s}),Object(a.jsxs)("a",{target:"_blank",rel:"noreferrer",href:t.vivinoUrl,className:"card__vivino-url",children:[Object(a.jsx)("h1",{className:"card__title",children:t.title}),t.country?Object(a.jsx)("p",{className:"card__info-paragraph",children:t.country}):"",t.year?Object(a.jsx)("p",{className:"card__info-paragraph",children:t.year}):"",t.price?Object(a.jsxs)("p",{className:"card__info-paragraph",children:["Price: ",Object(a.jsx)("br",{}),Math.floor(parseInt(t.price)),"kr"]}):"",t.rating?Object(a.jsxs)("p",{className:"card__info-paragraph",children:["Rating: ",Object(a.jsx)("br",{}),t.rating]}):""]})]})},Q=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.wineArr})),c=Object(o.c)((function(e){return e.auth})).user,r=e.searchValue?e.searchArr:n,s=100/c.columns,i=function(t,n,c,r){var o=!1;if(null===t||void 0===t||t.forEach((function(t){"".concat(t.shelf,":").concat(t.column)==="".concat(c,":").concat(r)&&(o=!0,n.push(function(t){return Object(a.jsx)(N,{card:t,cardWidth:s,setShowEditModal:e.setShowEditModal},t._id)}(t)))})),!o&&!e.searchValue)return n.push(function(e,t){return Object(a.jsxs)("div",{className:"add-wine__div",id:"".concat(e,":").concat(t),style:{width:"calc(".concat(s,"% - 20px)")},children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("p",{className:"card-header__position--dark",children:"".concat(e+1,":").concat(t+1)})}),Object(a.jsx)("button",{onClick:u,children:"+"})]},"".concat(e,":").concat(t))}(c,r))},u=function(n){e.setShowAddModal({display:"flex"}),t(S(function(e){var t=e.split(":");return{shelf:t[0],column:t[1]}}(n.target.parentElement.id)))};return Object(a.jsx)("div",{className:"wineGrid",children:function(e){for(var t=[],n=0;n<c.shelves;n++){for(var r=[],s=0;s<c.columns;s++)i(e,r,n,s);t.push(r)}return t.map((function(e,t){return Object(a.jsx)("div",{className:"wine-row",children:e},t)}))}(r)})},I=n(3),M=n(27),D=n(12),k=function(e){return{type:g,payload:e}},_=function(e){return{type:x,payload:e}},F=function(e){var t=e.buttonName,n=e.areYouSure,r=e.setAreYouSure,s=e.setShowEditModal,i=e.saveOrClearForm,u=Object(c.useState)("none"),l=Object(B.a)(u,2),d=l[0],j=l[1],h=Object(o.b)(),p=Object(o.c)((function(e){return e.auth})).user,O=Object(o.c)((function(e){return e.pickedWine}))._id,m=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h({type:C,payload:O}),s({display:"none"}),g(),e.next=6,A.a.delete("/wines",{data:{_id:O}});case 6:return e.next=8,A.a.delete("/users/deleteWine",{data:{email:p.email,_id:O}});case 8:i(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert("A server error occured.",e.t0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){return r(!n)};return Object(c.useEffect)((function(){j("Change Wine"===t?"grid":"none")})),Object(a.jsxs)("div",{className:"delete-button-container",style:{display:d},children:[Object(a.jsx)("button",{type:"button",onClick:g,className:"btn--enforced btn--form-delete",style:{display:n?"none":"block"},children:"Delete Wine"}),n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{className:"confirm-delete__p",children:"Are you sure you want to delete this wine?"}),Object(a.jsx)("button",{type:"button",className:"btn--enforced btn-delete--yes",onClick:m,children:"yes"}),Object(a.jsx)("button",{type:"button",className:"flat-button--border btn-delete--no",onClick:g,children:"no"})]}):""]})},G=function(e){var t=Object(o.b)(),n=Object(c.useRef)(null),r=Object(c.useRef)(null),s=Object(c.useState)(!1),i=Object(B.a)(s,2),u=i[0],l=i[1],d=Object(o.c)((function(e){return e.pickedWine})),A=Object(o.c)((function(e){return e.keepForm})),j=Object(c.useState)(Object(I.a)({},d)),h=Object(B.a)(j,2),b=h[0],f=h[1],p=function(){if(!A){var e={title:"",year:"",price:""};f(e),t(S(e))}},O=function(e){var t=e.target.name;f(Object(I.a)(Object(I.a)({},b),{},Object(D.a)({},t,e.target.value)))};return Object(c.useEffect)((function(){return f(Object(I.a)({},d))}),[d]),Object(c.useEffect)((function(){n.current.focus()}),[]),Object(a.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=b.title?isNaN(b.year)?{isValid:!1,input:r}:{isValid:!0}:{isValid:!1,input:n};if(!a.isValid)return a.input.current.focus();e.method(Object(I.a)(Object(I.a)({},d),b)),e.show({display:"none"}),l(!1),p()},className:"wineForm",children:[Object(a.jsx)("button",{type:"button",onClick:function(){p(),l(!1),e.show({display:"none"})},className:"cancelButton",children:"\u2715"}),Object(a.jsx)("label",{htmlFor:"newWineName",children:"Name"}),Object(a.jsx)("input",{ref:n,value:b.title,onChange:O,name:"title",type:"text"}),Object(a.jsx)("label",{htmlFor:"newWineDesc",children:"Year"}),Object(a.jsx)("input",{ref:r,value:b.year,onChange:O,name:"year",type:"text"}),Object(a.jsx)("label",{htmlFor:"newWineCountry",children:"Price"}),Object(a.jsx)("input",{value:b.price,onChange:O,name:"price",type:"text"}),Object(a.jsx)("button",{type:"submit",className:"btn--enforced btn--form-submit",style:{display:u?"none":"block"},children:e.buttonName}),Object(a.jsx)(F,{buttonName:e.buttonName,areYouSure:u,setAreYouSure:l,setShowEditModal:e.setShowEditModal,saveOrClearForm:p}),Object(a.jsxs)("div",{className:"save-form",children:[Object(a.jsx)("input",{value:A,onChange:function(){t({type:v,payload:!A})},type:"checkbox",className:"save-form__checkbox ".concat(A)}),Object(a.jsx)("label",{htmlFor:"saveForm",children:"keep form info"})]})]})},U=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.wineArr})),c=Object(o.c)((function(e){return e.pickedWine})),r=Object(o.c)((function(e){return e.auth})).user,s=function(){var e=Object(f.a)(b.a.mark((function e(a){var s,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(k([].concat(Object(M.a)(n),[Object(I.a)(Object(I.a)({},c),{},{country:"loading..."})]))),e.next=4,A.a.post("/wines",a);case 4:return s=e.sent,t(k([].concat(Object(M.a)(n),[s.data]))),e.next=8,A.a.post("/users/addWine",{_id:s.data._id,email:r.email});case 8:o=e.sent,i=o.data.token,t(E(i)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("A server error occured:",e.t0.message);case 16:case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"wineModal",style:e.showAddModal,children:Object(a.jsx)(G,{method:s,buttonName:"Add Wine",show:e.setShowAddModal})})},P=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.auth})).user,c=function(){var e=Object(f.a)(b.a.mark((function e(a){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.put("/wines",a);case 3:return c=e.sent,t(_(c.data)),e.next=7,A.a.post("/users/addWine",{_id:c.data._id,email:n.email});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),alert("A server error occured.",e.t0),console.error(e.t0);case 13:case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"wineModal",style:e.showEditModal,children:Object(a.jsx)(G,{method:c,buttonName:"Change Wine",show:e.setShowEditModal,setShowEditModal:e.setShowEditModal})})},W=function(e){var t=e.setSearchArr,n=e.searchValue,r=e.setSearchValue,s=Object(o.c)((function(e){return e.wineArr})),i=function(e){return"title"===e[0]||"year"===e[0]||"country"===e[0]||"price"===e[0]||"rating"===e[0]?e[1]:""},u=function(e){var t;return parseInt(null===(t=e.match(/[0-9]+/))||void 0===t?void 0:t[0])};return Object(c.useEffect)((function(){!function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return Object.entries(e).map(i).join("").toLowerCase().match(n.toLowerCase())}));t(e)}()}),[n,t,s]),Object(c.useEffect)((function(){!function(){if(null===n||void 0===n?void 0:n.match(/rating/i)){var e=null===s||void 0===s?void 0:s.filter((function(e){return parseInt(e.rating)>=u(n)}));t(e)}}()}),[n,t,s]),Object(c.useEffect)((function(){!function(){if(null===n||void 0===n?void 0:n.match(/kr/)){var e=null===s||void 0===s?void 0:s.filter((function(e){return parseInt(e.price)<=u(n)}));t(e)}}()}),[n,t,s]),Object(a.jsx)("div",{className:"main-header",children:Object(a.jsx)("input",{type:"text",onChange:function(e){r(e.target.value)},value:n,className:"search",placeholder:"search"})})},V=function(){var e=Object(o.b)(),t=Object(i.e)();return Object(a.jsx)("div",{className:"logout-container",children:Object(a.jsx)("button",{className:"logout-button",onClick:function(){e(y({})),localStorage.removeItem("jwtToken"),t.push("/")},children:"log out"})})},R=function(e){var t=e.setShowSettings,n=Object(o.c)((function(e){return e.auth})).user,r=Object(c.useState)({columns:n.columns,shelves:n.shelves}),s=Object(B.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(!1),d=Object(B.a)(l,2),j=d[0],h=d[1],p=Object(o.b)(),O=function(e){var t=e.target.name;u(Object(I.a)(Object(I.a)({},i),{},Object(D.a)({},t,e.target.value)))},m=function(){var e=Object(f.a)(b.a.mark((function e(a){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),i.columns&&i.shelves){e.next=5;break}h(!0),e.next=12;break;case 5:return h(!1),t(!1),e.next=9,A.a.post("/users/addStorage",{columns:i.columns,shelves:i.shelves,email:n.email});case 9:c=e.sent,r=c.data.token,p(E(r));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"initial-setup-container",children:Object(a.jsxs)("form",{className:"initial-setup__form",onSubmit:m,children:[j?Object(a.jsx)("p",{children:"columns and shelves need to be grater than zero"}):"",Object(a.jsx)("label",{children:"How many columns do you have?"}),Object(a.jsx)("input",{name:"columns",className:"settings-form__input",type:"number",placeholder:n.columns,value:i.column,onChange:O}),Object(a.jsx)("label",{children:"How many shelves do you have?"}),Object(a.jsx)("input",{name:"shelves",className:"settings-form__input",type:"number",placeholder:n.shelves,value:i.shelf,onChange:O}),Object(a.jsx)("button",{type:"submit",className:"settings__button--confirm btn--enforced",children:"confirm"}),Object(a.jsx)("p",{children:"You can change this whenever you want."})]})})},Y=(n(69),function(e){var t=e.showSettings,n=e.setShowSettings,c=t?null:"-400px",r=Object(o.c)((function(e){return e.auth})).user;return Object(a.jsxs)("div",{className:"settings-container",style:{right:c},children:[Object(a.jsx)("p",{children:r.name}),Object(a.jsx)(V,{}),Object(a.jsx)(R,{setShowSettings:n})]})}),T=(n(70),function(e){var t=e.showSettings,n=e.setShowSettings,r=Object(c.useState)("hamburger--closed"),s=Object(B.a)(r,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){i(t?"hamburger--open":"hamburger--closed")}),[t]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("button",{className:"hamburger",onClick:function(){n(!t)},children:Object(a.jsxs)("div",{id:"nav-icon2",className:"hamburger ".concat(o),children:[Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{})]})})})}),z=(n(71),function(){var e=Object(c.useState)(0),t=Object(B.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({display:"none"}),u=Object(B.a)(s,2),l=u[0],d=u[1],j=Object(c.useState)({display:"none"}),h=Object(B.a)(j,2),p=h[0],O=h[1],m=Object(c.useState)([]),g=Object(B.a)(m,2),w=g[0],v=g[1],x=Object(c.useState)(""),C=Object(B.a)(x,2),E=C[0],y=C[1],S=Object(c.useState)(!1),N=Object(B.a)(S,2),I=N[0],M=N[1],D=Object(o.c)((function(e){return e.auth})),_=D.isAuthenticated,F=D.user,G=Object(o.b)(),V=Object(i.e)();return Object(c.useEffect)((function(){(function(){var e=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/wines/getUserWines",{wineList:F.wineList});case 3:t=e.sent,n=t.data,G(k(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0,"getWines error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[G,F.wineList]),Object(c.useEffect)((function(){_||V.push("/login")})),F.columns&&F.shelves?Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsx)(T,{showSettings:I,setShowSettings:M}),Object(a.jsx)(Y,{showSettings:I,setShowSettings:M}),Object(a.jsx)(W,{setSearchArr:v,searchValue:E,setSearchValue:y}),Object(a.jsx)("h1",{className:"header",children:"This is the wine we whine about"}),Object(a.jsx)(U,{updateOnPost:n,setUpdateOnPost:r,showAddModal:l,setShowAddModal:d}),Object(a.jsx)(P,{showEditModal:p,setShowEditModal:O,updateOnPost:n,setUpdateOnPost:r}),Object(a.jsx)(Q,{updateOnPost:n,setUpdateOnPost:r,showAddModal:l,setShowAddModal:d,showEditModal:p,setShowEditModal:O,searchArr:w,searchValue:E})]}):Object(a.jsx)(R,{})}),J=function(){var e=Object(o.c)((function(e){return e.auth.isAuthenticated})),t=Object(i.e)();return Object(c.useEffect)((function(){e&&t.push("/dashboard")})),Object(a.jsxs)("div",{className:"landing-page",children:[Object(a.jsx)("h1",{className:"header",children:"This is the wine we whine about"}),Object(a.jsxs)("div",{className:"landing-page-link-container",children:[Object(a.jsx)(u.b,{to:"/register",className:" landing-page__link landing-page__link--colored",children:"Register"}),Object(a.jsx)(u.b,{to:"/login",className:"landing-page__link",children:"Log in"})]})]})},K=function(e){var t=Object(c.useState)({name:"",email:"",password:"",password2:""}),n=Object(B.a)(t,2),r=n[0],s=n[1],u=Object(o.c)((function(e){return e.auth.isAuthenticated})),l=Object(i.e)(),d=function(e){var t=e.target.name;s(Object(I.a)(Object(I.a)({},r),{},Object(D.a)({},t,e.target.value)))},j=Object(o.b)();return Object(c.useEffect)((function(){u&&l.push("/dashboard")})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"header",children:"This is the wine we whine about"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(a){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.a.post("/users/register",e);case 3:t.push("/login"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),a({type:p,payload:n.t0.response.data});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}(r,l))},className:"auth-form",children:[Object(a.jsx)("input",{className:"auth-form__input",onChange:d,name:"name",value:r.name,placeholder:"name"}),Object(a.jsx)("input",{className:"auth-form__input",onChange:d,name:"email",value:r.email,placeholder:"email"}),Object(a.jsx)("input",{className:"auth-form__input",onChange:d,name:"password",value:r.password,placeholder:"password",type:"password"}),Object(a.jsx)("input",{className:"auth-form__input",onChange:d,name:"password2",value:r.password2,placeholder:"repeat password",type:"password"}),Object(a.jsx)("button",{className:"auth-form__submit-button btn--enforced",type:"submit",children:"register"})]})]})},H=(n(72),function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(B.a)(t,2),r=n[0],s=n[1],u=Object(c.useState)(!1),d=Object(B.a)(u,2),h=d[0],O=d[1],m=Object(i.e)(),g=Object(o.c)((function(e){return e.auth.isAuthenticated})),w=Object(o.c)((function(e){return e.errorState})),v=Object(o.b)();Object(c.useEffect)((function(){if(w)return O(w)}),[w]),Object(c.useEffect)((function(){g&&m.push("/dashboard")}));var x=function(e){var t=e.target.name;s(Object(I.a)(Object(I.a)({},r),{},Object(D.a)({},t,e.target.value)))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"header",children:"This is the wine we whine about"}),Object(a.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),v((n=r,function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.a.post("/users/login",n).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),j(n);var a=Object(l.a)(n);t(y(a))})).catch((function(e){return t({type:p,payload:e.response.data})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.history.push("/dashboard")},className:"auth-form",children:[h.email?Object(a.jsx)("p",{children:h.email}):Object(a.jsx)("p",{}),Object(a.jsx)("input",{className:"auth-form__input",onChange:x,name:"email",value:r.email,placeholder:"email"}),h.password?Object(a.jsx)("p",{children:h.password}):Object(a.jsx)("p",{}),Object(a.jsx)("input",{className:"auth-form__input",onChange:x,name:"password",value:r.password,placeholder:"password",type:"password"}),Object(a.jsx)("button",{className:"auth-form__submit-button btn--enforced",type:"submit",children:"log in"})]})]})}),L=function(e){var t=Object(o.b)(),n=Object(i.e)();if(localStorage.jwtToken){var c=localStorage.jwtToken;j(c);var r=Object(l.a)(c);t(y(r));var s=Date.now()/1e3;r.exp<s&&(t((function(e){localStorage.removeItem("jwtToken"),j(!1),e(y({}))})),n.push("/login"))}return Object(a.jsx)(u.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:J}),Object(a.jsx)(i.a,{path:"/register",component:K}),Object(a.jsx)(i.a,{path:"/login",component:H}),Object(a.jsx)(i.a,{path:"/dashboard",component:z})]})})},Z=n(14),X=n(39),q=n(73),$={isAuthenticated:!1,user:{},loading:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(I.a)(Object(I.a)({},e),{},{isAuthenticated:!q(t.payload),user:t.payload});case O:return Object(I.a)(Object(I.a)({},e),{},{loading:!0});default:return e}},te={},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},ae=function(e,t){return e.map((function(e){return e._id!==t._id?e:t}))},ce=function(e,t){return e.filter((function(e){return e._id!==t}))},re=[],se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload;case x:return ae(e,t.payload);case C:return ce(e,t.payload);default:return e}},oe={},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;default:return e}},le=Object(Z.c)({auth:ee,errorState:ne,wineArr:se,pickedWine:ie,keepForm:ue}),de=[X.a],Ae=Z.d.apply(void 0,[Z.a.apply(void 0,de)].concat([])),je=Object(Z.e)(le,{},Ae);s.a.render(Object(a.jsx)(o.a,{store:je,children:Object(a.jsx)(L,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.2c37fc3d.chunk.js.map